<html>

<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>


<head>
	<title>ADAPTIVE SEGMENT CREATOR</title>
	<link href="multiple_select/multiple-select/multiple-select.css" rel="stylesheet"/>
	<link href="template.css" rel="stylesheet"/>
	<script src="d3/d3.js"></script>
	<script src="d3/d3.min.js"></script>
	<script src="multiple_select/multiple-select/jquery.multiple.select.js"></script>
</head>

<body>
	
	<div id = "all_the_stuff">
	<H1 class="title">ADAPTIVE SEGMENT CREATOR</H1>	
	
		<div id = "selections">
			<table>
			<tr><tr><tr></tr></tr></tr>
			<tr><td><select name="org" class="dropdown" style="width:450px" id="org_dropdown" multiple>
				</select>
				<script>
					$("#org_dropdown").multipleSelect({
						placeholder: "Choose Org",
						filter: true,
						selectAll: false,
						single: true
					});	
				</script>	
				</td></tr>
				<tr><td><select name="adv" class="dropdown" style="width:450px" size=12 id="adv_list" multiple></select>
				<script>
					$("#adv_list").multipleSelect({
						placeholder: "Choose Advertiser",
						filter: true,
						selectAll: false,
						single: true
					});	
				</script>		
				</td></tr>
			<tr>
			<td><select name="dataPixels" class="dropdown" style="width:450px" id="dataPixels_list" multiple>
			</select>
			<script>
				$("#dataPixels_list").multipleSelect({
					placeholder: "Choose Data Pixels",					
					filter: true
				});	
			</script>	
			</td>
			
		</tr>
		</table>
		
		<input type="file" />
			
		<div id="submit_button">
			<button type="submit" class="button" value="punch" id="punch">&nbspCreate&nbsp</button>
		</div>
		
		<div id="feedback" class="feedback"></div>
		
		<div id="fold_feedback" class="feedback"></div>
		</div>
			
		<!--<input id="fileSelect" type="file" accept=".csv" />-->
	
	
</div>
</body>

	<script>
	var reader = new FileReader();  
		

	$("#punch").click(function() {
		console.log("upload pushed");
		  var file = document.querySelector('input[type=file]').files[0];      
		  reader.addEventListener("load", parseFile, false);
		  if (file) {
			reader.readAsText(file);
		  }      

	});
		
		function parseFile(){
		  var data = d3.csvParse(reader.result, function(d){
			upload_button(d); 		
		  });
		}
	</script>	
		
	
<script src="get_orgs.js"></script>	
<script src="get_advs.js"></script>
<script src="get_dPixels.js"></script>
<script src="t1_toolkit.js"></script>
<script src="upload.js"></script>	

</html>
