<html>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

<head>
	<title>3RD PARTY AUDIENCE TARGETING</title>
	<link href="zip.css" rel="stylesheet"/>
	<script src="t1_toolkit.js"></script>
	<script src="d3/d3.js"></script>
	<script src="d3/d3.min.js"></script>
	<link href="multiple_select/multiple-select/multiple-select.css" rel="stylesheet"/>
		  
	<script src="multiple_select/multiple-select/jquery.multiple.select.js"></script>

</head>

<body>
	
	<div id = "all_the_stuff">
		<H1 class="title">3RD PARTY AUDIENCE TARGETING</H1>
		<div class="all">
				<form id="toggle" class="toggle">
			<input type="radio" name="toggle" value="audience_segments" id="audience_segments" checked="checked"><label for="audience_segments">Audience Segments</label>	
			<input type="radio" name="toggle" value="retired_audience_segments" id="retired_audience_segments"><label for="retired_audience_segments">Retired Audience Segments</label>
		</form>
		<div class="download">

		<br></br>
		<div class="box" style="border: dashed 3px #54BCEB">
			<text class="info">Generate QA Template (Dropdown Option)</text>
			<table>
			<tr><tr><tr></tr></tr></tr>
			<tr><td><select name="org" class="dropdown" style="width:300px" id="org_dropdown" multiple>
				</select>
				<script>
					$("#org_dropdown").multipleSelect({
						placeholder: "Choose Org",
						filter: true,
						selectAll: false,
						single: true
					});	
				</script>	
				</td></tr>
				<tr><td><select name="adv" class="dropdown" style="width:300px" size=12 id="adv_list" multiple></select>
				<script>
					$("#adv_list").multipleSelect({
						placeholder: "Choose Advertiser",
						filter: true
					});	
				</script>		
				</td></tr>
				<tr><td><select name="campaign" class="dropdown" style="width:300px" size=12 id="campaign_list" multiple></select>
				<script>
					$("#campaign_list").multipleSelect({
						placeholder: "Choose Campaign",
						filter: true
					});		
				</script>
				<label><input type="checkbox" name="active_camp" id="active_camp" checked="checked"> Show Active Campaigns Only</label>				
				</td></tr>
				<tr><td><select name="strategy" class="dropdown" style="width:300px" size=12 id="strat_list" multiple></select>
				<script>
					$("#strat_list").multipleSelect({
						placeholder: "Choose Strategies",
						filter: true
					});	
				</script>	
				<label><input type="checkbox" name="active" id="active" checked="checked"> Show Active Strategies Only</label>
				</td></tr><tr><tr><tr><tr><tr><tr></tr></tr></tr></tr></tr></tr>	
			</table>
		<button type="get_dropdown" class="button" value="get_dropdown" id="get_dropdown">&nbspDOWNLOAD&nbsp</button>
		</div>
		
		<div class="box" style="border: dashed 3px #54BCEB;">
		<text class="info">Generate QA Template (CSV Option)</text>
			<input type="file" style="width:250px"/>
			<button type="get_csv" class="button" value="get_csv" id="get_csv">&nbspDOWNLOAD&nbsp</button>
		</div>
		</div>
		
		<div class="upload" style="width:100%;">
	
		<div class="box2" style="border: dashed 3px #54BCEB;">
		<text class="info">Upload Bulk Edit</text>
			<input type="file" style="width:250px"/>
			<button type="punch" class="button" value="punch" id="punch">&nbspUPLOAD&nbsp</button>
		</div>
		</div>
		</div>
		
		
		<br></br>
		
		<div id="feedback" class="feedback">
		</div>
		
		</div>

	
	</body>
	

<script src="get_orgs.js"></script>	
<script src="get_advs.js"></script>
<script src="get_campaigns.js"></script>
<script src="get_strats.js"></script>
<script src="aud_test.js"></script>

<script>
			var reader = new FileReader();  
				

			$("#punch").click(function() {
				
				  var file = document.querySelector('input[type=file]').files[0];      
				  reader.addEventListener("load", parseFile, false);
				  if (file) {
					reader.readAsText(file);
				  }      

			});
				
				function parseFile(){
				  var data = d3.csvParse(reader.result, function(d){
					  console.log(d);
					  upload_button(d); 
					});		
				  };

	  </script>

		<script>
			var reader2 = new FileReader();  
				

			$("#get_csv").click(function() {
				 
				 
				 
				  var file = document.querySelector('input[type=file]').files[0];		  		  
				  reader2.addEventListener("load", parseFile2, false);
				  
				  if (file) {
				  //console.log(file.length);
					reader2.readAsText(file);
				  }
			});
				
				function parseFile2(){
				var get_arr = reader2.result;
				get_arr = get_arr.split("\n");
				var count = get_arr.length-2;
				console.log(count);
				
				  var data = d3.csvParse(reader2.result, function(d){
				  
					  console.log(d);
					  get_button(d,count); 
					});		
				  };

	  </script>
</html>
